; PlatformIO Project Configuration File
;
; Evil Portal v1.1 for ESP32-S3
;
; Build: pio run
; Upload: pio run --target upload
; Monitor: pio device monitor

[platformio]
default_envs = esp32s3

[env:esp32s3]
platform = espressif32@6.4.0
board = esp32-s3-devkitc-1
framework = arduino

; Board configuration
board_build.mcu = esp32s3
board_build.f_cpu = 240000000L
board_build.flash_mode = qio
board_build.flash_size = 4MB
board_build.partitions = default_4mb.csv

; USB CDC for serial output (Electronic Cats WiFi Dev Board)
build_flags = 
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DARDUINO_USB_MODE=1
    -DCORE_DEBUG_LEVEL=0

; Libraries
lib_deps = 
    mathieucarbou/AsyncTCP @ 3.3.2
    mathieucarbou/ESPAsyncWebServer @ 3.3.22
    bblanchon/ArduinoJson @ ^7.0.4

; Upload settings
upload_speed = 921600
monitor_speed = 115200

; For ESP32-S3 with built-in USB
upload_protocol = esptool
monitor_rts = 0
monitor_dtr = 0

; ============================================
; Alternative environment for other ESP32 boards
; ============================================

[env:esp32dev]
platform = espressif32@6.4.0
board = esp32dev
framework = arduino

board_build.partitions = default_4mb.csv

lib_deps = 
    mathieucarbou/AsyncTCP @ 3.3.2
    mathieucarbou/ESPAsyncWebServer @ 3.3.22
    bblanchon/ArduinoJson @ ^7.0.4

upload_speed = 921600
monitor_speed = 115200

; ============================================
; Environment for Electronic Cats board specifically
; ============================================

[env:electroniccats]
platform = espressif32@6.4.0
board = esp32-s3-devkitc-1
framework = arduino

board_build.mcu = esp32s3
board_build.f_cpu = 240000000L
board_build.flash_mode = qio
board_build.flash_size = 4MB
board_build.partitions = default_4mb.csv

build_flags = 
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DARDUINO_USB_MODE=1
    -DCORE_DEBUG_LEVEL=0
    ; LED pins for Electronic Cats WiFi Dev Board
    -DLED_ACCENT_PIN=4
    -DLED_STATUS_PIN=5
    -DLED_ALERT_PIN=6

lib_deps = 
    mathieucarbou/AsyncTCP @ 3.3.2
    mathieucarbou/ESPAsyncWebServer @ 3.3.22
    bblanchon/ArduinoJson @ ^7.0.4

upload_speed = 921600
monitor_speed = 115200
upload_protocol = esptool
monitor_rts = 0
monitor_dtr = 0
